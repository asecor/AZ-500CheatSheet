# Azure Security Engineer Study Guide Prep For AZ-500

## Domain 1 (Manage identity and access (30-35%)) Configuring Azure Active Directory for Microsoft Azure Workloads

### Quickstart: Add guest users in the Azure portal - Azure Active Directory | Microsoft Docs
https://docs.microsoft.com/en-us/azure/active-directory/b2b/b2b-quickstart-add-guest-users-portal

### Azure Active Directory Documentation - Tutorials, API Reference | Microsoft Docs
https://docs.microsoft.com/en-us/azure/active-directory/

### Azure Active Directory users, groups, roles, and licenses documentation | Microsoft Docs
https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-groups-create-azure-portal
https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/groups-settings-v2-cmdlets

### Add or delete users - Azure Active Directory | Microsoft Docs
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/add-users-azure-active-directory

### Creating a new user in Azure AD | Microsoft Docs
https://docs.microsoft.com/en-us/powershell/azure/active-directory/new-user-sample?view=azureadps-2.0

### New-AzureADUser (AzureAD) Syntax Options | Microsoft Docs
https://docs.microsoft.com/en-us/powershell/module/azuread/new-azureaduser?view=azureadps-2.0

### AzureAD | Microsoft Docs
https://docs.microsoft.com/en-us/powershell/module/azuread/?view=azureadps-2.0

### New-AzureADGroup (AzureAD) Syntax Options | Microsoft Docs
https://docs.microsoft.com/en-us/powershell/module/azuread/new-azureadgroup?view=azureadps-2.0

### What is Azure Active Directory B2B collaboration? - Azure Active Directory | Microsoft Docs
https://docs.microsoft.com/en-us/azure/active-directory/b2b/what-is-b2b

### Create App Registration
https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal
https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app
https://docs.microsoft.com/en-us/graph/auth-register-app-v2
https://docs.microsoft.com/en-us/azure/active-directory-b2c/tutorial-register-applications
https://docs.microsoft.com/en-us/powerapps/developer/common-data-service/walkthrough-register-app-azure-active-directory

### Configure App Registration permission scopes
https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent
https://docs.microsoft.com/en-us/azure-stack/operator/azure-stack-create-service-principals

### Manage App Registration permission consent
https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent
https://docs.microsoft.com/en-us/graph/notifications-integration-app-registration

### Configure Multi-Factor Authentication settings
https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-mfa-mfasettings
https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-mfa-userdevicesettings
https://docs.microsoft.com/en-us/azure/active-directory/user-help/multi-factor-authentication-end-user-manage-settings

### Manage Azure AD directory groups
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-manage-groups
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-groups-create-azure-portal
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-groups-members-azure-portal


### Manage Azure AD users
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/add-users-azure-active-directory
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/license-users-groups
https://docs.microsoft.com/en-us/azure/billing/billing-add-change-azure-subscription-administrator

### Install and configure Azure AD Connect
https://docs.microsoft.com/en-us/azure/active-directory/hybrid/whatis-azure-ad-connect
https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-select-installation
https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-express
https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-custom
https://auth0.com/docs/connections/enterprise/azure-active-directory/v2
https://docs.microsoft.com/en-us/azure/active-directory/hybrid/reference-connect-accounts-permissions

### Configure authentication methods
https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-authentication-methods
https://docs.microsoft.com/en-us/azure/security/fundamentals/choose-ad-authn

### Implement Conditional Access policies
https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/overview
https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/plan-conditional-access
https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/best-practices
https://docs.microsoft.com/en-us/azure/active-directory/conditional-access/concept-conditional-access-policies
https://docs.microsoft.com/en-us/azure/role-based-access-control/conditional-access-azure-management
https://docs.microsoft.com/en-us/azure/role-based-access-control/overview

### Configure Azure AD identity protection
https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/overview-identity-protection
https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/howto-identity-protection-configure-mfa-policy
https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/howto-identity-protection-configure-risk-policies
https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-mfa-howitworks
https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-mfa-getstarted
https://www.microsoft.com/en-gb/security/technology/identity-access-management
https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/concept-identity-protection-policies

### Monitor privileged access (PIM)
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-configure
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-add-role-to-user
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-deployment-plan
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/azure-pim-resource-rbac
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-email-notifications

### Configure Access Reviews
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-resource-roles-overview-dashboards
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-perform-security-review
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-start-security-review
https://docs.microsoft.com/en-us/azure/active-directory/governance/create-access-review

### Activate Privileged Identity Management
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-how-to-activate-role
https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-getting-started#enable-pim

### Transfer Azure subscriptions between Azure AD tenants
https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory
https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/billing-subscription-transfer
https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/transfer-subscriptions-subscribers-csp
https://docs.microsoft.com/en-us/azure/billing/billing-subscription-transfer

### Manage API access to Azure subscriptions and resources
https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios
https://docs.microsoft.com/en-us/azure/role-based-access-control/role-assignments-rest
https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-api-authentication
https://docs.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal

### Powershell Commands
Getting AzureAD powershell module
```
Install-Module -Name Azure500AD -Repository PSGallery -Verbose
```

Authenticate to Azure AD
```
Connect-AzureAD
```

PasswordProfile - Specifies the user's password profile. Note that the parameter type for this parameter is "PasswordProfile". in order to pass a parameter of this type, you first need to create a variable in PowerShell with that type. We can do that with the New-Object cmdlet:

```
"$PasswordProfile = New-Object -TypeName Microsoft.Open.AzureAD.Model.PasswordProfile"
```

Then you can proceed to set the value of the password in this variable:

```
"$PasswordProfile.Password = "<Password>""
```

To create the user, call the New-AzureADUser cmdlet with the parameter values:

```
"New-AzureADUser -AccountEnabled $True -DisplayName "First Last" -PasswordProfile $PasswordProfile -MailNickName "FirstL" -UserPrincipalName "FirstL@<Domain>.com""
```

Creating an Azure AD group
```
New-AzureADGroup -DisplayName DC -MailEnabled $false -MailNickName NotSet -SecurityEnabled $true
```

Add a group member
```
"$group = Get-AzureADGroup -Filter "DisplayName eq 'DC'""

Get-AzureADGroupMember -ObjectId $group.ObjectId

Get-AzureADUser | Where-Object -FilterScript { $_.UserType -eq 'Member' } |
Select-Object -Property objectId, DisplayName

Add-AzureADGroupMember -ObjectId $group.ObjectId `
    -RefObjectId "<objectId from previous get command>"
```
